<div class="container py-4">
  <div class="d-flex flex-wrap justify-content-between align-items-end gap-3 mb-3">
    <div>
      <h1 class="h3 mb-1">Users</h1>
      <div class="text-muted">Quản lý tài khoản</div>
    </div>

    <%= form_with url: admin_users_path, method: :get, local: true, class: "d-flex gap-2" do %>
      <input name="q" value="<%= @q %>" class="form-control" placeholder="Tìm theo tên/email..." style="min-width:260px;">
      <button class="btn btn-outline-primary">Search</button>
    <% end %>
  </div>

  <div class="card shadow-sm">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>ID</th>
            <th>User</th>
            <th class="text-nowrap">Role</th>
            <th class="text-nowrap">Created</th>
            <th class="text-end text-nowrap">Hành động</th>
          </tr>
        </thead>

        <tbody>
          <% @users.each do |u| %>
            <tr>
              <td class="text-muted">#<%= u.id %></td>
              <td>
                <div class="fw-semibold">
                  <%= link_to (u.name.presence || "(no name)"), admin_user_path(u), class: "text-decoration-none" %>
                </div>
                <div class="text-muted small"><%= u.email %></div>
              </td>
              <td class="text-nowrap">
                <% if u.admin? %>
                  <span class="badge bg-danger">admin</span>
                <% else %>
                  <span class="badge bg-secondary">user</span>
                <% end %>
              </td>
              <td class="text-nowrap text-muted"><%= u.created_at.strftime("%d/%m/%Y") %></td>
              <td class="text-end text-nowrap">
                <%= link_to "Show", admin_user_path(u), class: "btn btn-sm btn-outline-secondary" %>
              </td>
            </tr>
          <% end %>

          <% if @users.blank? %>
            <tr><td colspan="5" class="text-center text-muted py-4">Không có user.</td></tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <div class="card-body d-flex justify-content-center">
      <%= paginate @users %>
    </div>
  </div>
</div>
