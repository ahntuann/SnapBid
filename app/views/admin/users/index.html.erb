<%= content_for :page_title, "Users" %>

<div class="admin-page-header d-flex flex-wrap justify-content-between align-items-end gap-3">
  <div>
    <h1>Users</h1>
    <p class="subtitle">Quản lý tài khoản người dùng</p>
  </div>

  <%= form_with url: admin_users_path, method: :get, local: true, class: "admin-search" do %>
    <input name="q" value="<%= @q %>" class="admin-input" placeholder="Tìm theo tên/email..." style="min-width:240px;">
    <button class="admin-btn admin-btn-outline" type="submit">
      <i class="bi bi-search"></i> Tìm
    </button>
  <% end %>
</div>

<div class="admin-card">
  <div class="admin-card-header">
    <span class="admin-card-title"><i class="bi bi-people me-1"></i> Danh sách</span>
  </div>

  <div class="table-responsive">
    <table class="admin-table">
      <thead>
        <tr>
          <th>User</th>
          <th>Role</th>
          <th>Ngày tạo</th>
          <th class="text-end">Hành động</th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |u| %>
          <tr>
            <td>
              <div class="fw-semibold" style="color:#1e293b;">
                <%= link_to (u.name.presence || "(no name)"), admin_user_path(u), style: "color:inherit;text-decoration:none;" %>
              </div>
              <div style="font-size:12px;color:#94a3b8;"><%= u.email %></div>
            </td>
            <td>
              <% if u.admin? %>
                <span class="admin-badge blocked">Admin</span>
              <% else %>
                <span class="admin-badge na">User</span>
              <% end %>
            </td>
            <td style="font-size:13px;color:#64748b;"><%= u.created_at.strftime("%d/%m/%Y") %></td>
            <td class="text-end">
              <%= link_to admin_user_path(u), class: "admin-btn admin-btn-outline admin-btn-sm" do %>
                <i class="bi bi-eye"></i> Xem
              <% end %>
            </td>
          </tr>
        <% end %>

        <% if @users.blank? %>
          <tr>
            <td colspan="4" style="text-align:center;color:#94a3b8;padding:40px 0;">
              <i class="bi bi-people" style="font-size:28px;display:block;margin-bottom:8px;"></i>
              Không có user nào.
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div style="padding:16px 20px;display:flex;justify-content:center;">
    <%= paginate @users %>
  </div>
</div>
